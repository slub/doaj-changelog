---
title: "DOAJ Changelog"
date: "`r format(Sys.time(), '%Y-%m-%d')`"
lang: "en-US"
output:
  html_document:
    mathjax: null
    keep_md: true
    df_print: paged
---
```{r setup, include=F}
# nolint start: line_length_linter, commented_code_linter.
knitr::opts_chunk$set(echo = FALSE, error = FALSE, message = FALSE, warning = FALSE)
knitr::opts_knit$set(root.dir = "..")
```

```{r source-remote}
doaj_journals <- readr::read_csv("https://doaj.org/csv", show_col_types = FALSE)
```

```{r source-local}
doaj_journals_withdrawn <- readr::read_csv("data/doaj_changelog_withdrawn_list_enriched_utf8.csv")
```

```{r doaj-publisher-mapping}
# Mapping by @MiWohlgemuth
doaj_journals[grepl("Elsevier|KeAi Communications", doaj_journals$Publisher, ignore.case = TRUE), "Publisher"] <- "Elsevier"
doaj_journals[grepl("Wiley|American Geophysical Union", doaj_journals$Publisher, ignore.case = TRUE), "Publisher"] <- "Wiley"
doaj_journals[grepl("BMC|Springer|Nature Publishing|Nature Portfolio", doaj_journals$Publisher, ignore.case = TRUE), "Publisher"] <- "SpringerNature"
doaj_journals[grepl("Taylor & Francis|F1000 Research|Dove Medical", doaj_journals$Publisher, ignore.case = TRUE), "Publisher"] <- "Taylor & Francis"
doaj_journals[grepl("Wolters Kluwer", doaj_journals$Publisher, ignore.case = TRUE), "Publisher"] <- "Wolters Kluwer"
doaj_journals[grepl("SAGE|Sage Publishing", doaj_journals$Publisher, ignore.case = FALSE), "Publisher"] <- "SAGE"
doaj_journals[grepl("De Gruyter|Brill|Vandenhoeck|Sciendo", doaj_journals$Publisher, ignore.case = FALSE), "Publisher"] <- "De Gruyter Brill"
```

# Top 100 Publishers of Withdrawn Journals

```{r doaj-publishers-withdrawn}
doaj_publishers_withdrawn <- setNames(
  as.data.frame(
    table(doaj_journals_withdrawn$publisher), stringsAsFactors = FALSE
  )[order(table(doaj_journals_withdrawn$publisher), decreasing = TRUE), ],
  c("Publisher", "Journal Count")
)
```

```{r doaj-publishers-withdrawn-display, rownames.print=F}
doaj_publishers_withdrawn[1:100, ]
```

# Top 100 Publishers of Indexed Journals

```{r doaj-publishers-indexed, rownames.print=F}
doaj_publishers <- setNames(
  as.data.frame(
    table(doaj_journals$Publisher), stringsAsFactors = FALSE
  )[order(table(doaj_journals$Publisher), decreasing = TRUE), ],
  c("Publisher", "Journal Count")
)
```

```{r doaj-publishers-indexed-display, rownames.print=F}
doaj_publishers[1:100, ]
```

---

```{r linter-halt}
# nolint end
```
